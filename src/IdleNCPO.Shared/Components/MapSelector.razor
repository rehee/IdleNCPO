@using IdleNCPO.Core.Profiles

<div class="card map-selector">
  <div class="card-header">
    <h5>选择地图</h5>
  </div>
  <div class="card-body">
    <div class="row">
      @if (Maps != null)
      {
        @foreach (var map in Maps)
        {
          <div class="col-md-6 mb-3">
            <div class="card map-card h-100" @onclick="() => SelectMap(map.Key)">
              <div class="card-body">
                <h6 class="card-title">@map.Name</h6>
                <p class="card-text">@map.Description</p>
                <small class="text-muted">
                  等级: @map.MinLevel - @map.MaxLevel | 
                  波次: @map.Waves.Count
                </small>
              </div>
            </div>
          </div>
        }
      }
      else
      {
        <div class="col-12">
          <p class="text-muted">暂无可用地图</p>
        </div>
      }
    </div>
  </div>
</div>

@code {
  [Parameter]
  public IEnumerable<MapProfile>? Maps { get; set; }

  [Parameter]
  public EventCallback<EnumMap> OnMapSelected { get; set; }

  private async Task SelectMap(EnumMap mapKey)
  {
    await OnMapSelected.InvokeAsync(mapKey);
  }
}
